// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;
using TelegramGroupsAdmin.Data;

#nullable disable

namespace TelegramGroupsAdmin.Data.Migrations
{
    [DbContext(typeof(AppDbContext))]
    [Migration("20260102184229_AddTelegramUserMappingsForeignKey")]
    partial class AddTelegramUserMappingsForeignKey
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "10.0.0")
                .HasAnnotation("Relational:MaxIdentifierLength", 63);

            NpgsqlModelBuilderExtensions.UseIdentityByDefaultColumns(modelBuilder);

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzBlobTrigger", b =>
                {
                    b.Property<string>("SchedulerName")
                        .HasColumnType("text")
                        .HasColumnName("sched_name");

                    b.Property<string>("TriggerName")
                        .HasColumnType("text")
                        .HasColumnName("trigger_name");

                    b.Property<string>("TriggerGroup")
                        .HasColumnType("text")
                        .HasColumnName("trigger_group");

                    b.Property<byte[]>("BlobData")
                        .HasColumnType("bytea")
                        .HasColumnName("blob_data");

                    b.HasKey("SchedulerName", "TriggerName", "TriggerGroup");

                    b.ToTable("qrtz_blob_triggers", "quartz");
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzCalendar", b =>
                {
                    b.Property<string>("SchedulerName")
                        .HasColumnType("text")
                        .HasColumnName("sched_name");

                    b.Property<string>("CalendarName")
                        .HasColumnType("text")
                        .HasColumnName("calendar_name");

                    b.Property<byte[]>("Calendar")
                        .IsRequired()
                        .HasColumnType("bytea")
                        .HasColumnName("calendar");

                    b.HasKey("SchedulerName", "CalendarName");

                    b.ToTable("qrtz_calendars", "quartz");
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzCronTrigger", b =>
                {
                    b.Property<string>("SchedulerName")
                        .HasColumnType("text")
                        .HasColumnName("sched_name");

                    b.Property<string>("TriggerName")
                        .HasColumnType("text")
                        .HasColumnName("trigger_name");

                    b.Property<string>("TriggerGroup")
                        .HasColumnType("text")
                        .HasColumnName("trigger_group");

                    b.Property<string>("CronExpression")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("cron_expression");

                    b.Property<string>("TimeZoneId")
                        .HasColumnType("text")
                        .HasColumnName("time_zone_id");

                    b.HasKey("SchedulerName", "TriggerName", "TriggerGroup");

                    b.ToTable("qrtz_cron_triggers", "quartz");
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzFiredTrigger", b =>
                {
                    b.Property<string>("SchedulerName")
                        .HasColumnType("text")
                        .HasColumnName("sched_name");

                    b.Property<string>("EntryId")
                        .HasColumnType("text")
                        .HasColumnName("entry_id");

                    b.Property<long>("FiredTime")
                        .HasColumnType("bigint")
                        .HasColumnName("fired_time");

                    b.Property<string>("InstanceName")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("instance_name");

                    b.Property<bool>("IsNonConcurrent")
                        .HasColumnType("bool")
                        .HasColumnName("is_nonconcurrent");

                    b.Property<string>("JobGroup")
                        .HasColumnType("text")
                        .HasColumnName("job_group");

                    b.Property<string>("JobName")
                        .HasColumnType("text")
                        .HasColumnName("job_name");

                    b.Property<int>("Priority")
                        .HasColumnType("integer")
                        .HasColumnName("priority");

                    b.Property<bool?>("RequestsRecovery")
                        .HasColumnType("bool")
                        .HasColumnName("requests_recovery");

                    b.Property<long>("ScheduledTime")
                        .HasColumnType("bigint")
                        .HasColumnName("sched_time");

                    b.Property<string>("State")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("state");

                    b.Property<string>("TriggerGroup")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("trigger_group");

                    b.Property<string>("TriggerName")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("trigger_name");

                    b.HasKey("SchedulerName", "EntryId");

                    b.HasIndex("InstanceName")
                        .HasDatabaseName("idx_qrtz_ft_trig_inst_name");

                    b.HasIndex("JobGroup")
                        .HasDatabaseName("idx_qrtz_ft_job_group");

                    b.HasIndex("JobName")
                        .HasDatabaseName("idx_qrtz_ft_job_name");

                    b.HasIndex("RequestsRecovery")
                        .HasDatabaseName("idx_qrtz_ft_job_req_recovery");

                    b.HasIndex("TriggerGroup")
                        .HasDatabaseName("idx_qrtz_ft_trig_group");

                    b.HasIndex("TriggerName")
                        .HasDatabaseName("idx_qrtz_ft_trig_name");

                    b.HasIndex("SchedulerName", "TriggerName", "TriggerGroup")
                        .HasDatabaseName("idx_qrtz_ft_trig_nm_gp");

                    b.ToTable("qrtz_fired_triggers", "quartz");
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzJobDetail", b =>
                {
                    b.Property<string>("SchedulerName")
                        .HasColumnType("text")
                        .HasColumnName("sched_name");

                    b.Property<string>("JobName")
                        .HasColumnType("text")
                        .HasColumnName("job_name");

                    b.Property<string>("JobGroup")
                        .HasColumnType("text")
                        .HasColumnName("job_group");

                    b.Property<string>("Description")
                        .HasColumnType("text")
                        .HasColumnName("description");

                    b.Property<bool>("IsDurable")
                        .HasColumnType("bool")
                        .HasColumnName("is_durable");

                    b.Property<bool>("IsNonConcurrent")
                        .HasColumnType("bool")
                        .HasColumnName("is_nonconcurrent");

                    b.Property<bool>("IsUpdateData")
                        .HasColumnType("bool")
                        .HasColumnName("is_update_data");

                    b.Property<string>("JobClassName")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("job_class_name");

                    b.Property<byte[]>("JobData")
                        .HasColumnType("bytea")
                        .HasColumnName("job_data");

                    b.Property<bool>("RequestsRecovery")
                        .HasColumnType("bool")
                        .HasColumnName("requests_recovery");

                    b.HasKey("SchedulerName", "JobName", "JobGroup");

                    b.HasIndex("RequestsRecovery")
                        .HasDatabaseName("idx_qrtz_j_req_recovery");

                    b.ToTable("qrtz_job_details", "quartz");
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzLock", b =>
                {
                    b.Property<string>("SchedulerName")
                        .HasColumnType("text")
                        .HasColumnName("sched_name");

                    b.Property<string>("LockName")
                        .HasColumnType("text")
                        .HasColumnName("lock_name");

                    b.HasKey("SchedulerName", "LockName");

                    b.ToTable("qrtz_locks", "quartz");
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzPausedTriggerGroup", b =>
                {
                    b.Property<string>("SchedulerName")
                        .HasColumnType("text")
                        .HasColumnName("sched_name");

                    b.Property<string>("TriggerGroup")
                        .HasColumnType("text")
                        .HasColumnName("trigger_group");

                    b.HasKey("SchedulerName", "TriggerGroup");

                    b.ToTable("qrtz_paused_trigger_grps", "quartz");
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzSchedulerState", b =>
                {
                    b.Property<string>("SchedulerName")
                        .HasColumnType("text")
                        .HasColumnName("sched_name");

                    b.Property<string>("InstanceName")
                        .HasColumnType("text")
                        .HasColumnName("instance_name");

                    b.Property<long>("CheckInInterval")
                        .HasColumnType("bigint")
                        .HasColumnName("checkin_interval");

                    b.Property<long>("LastCheckInTime")
                        .HasColumnType("bigint")
                        .HasColumnName("last_checkin_time");

                    b.HasKey("SchedulerName", "InstanceName");

                    b.ToTable("qrtz_scheduler_state", "quartz");
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzSimplePropertyTrigger", b =>
                {
                    b.Property<string>("SchedulerName")
                        .HasColumnType("text")
                        .HasColumnName("sched_name");

                    b.Property<string>("TriggerName")
                        .HasColumnType("text")
                        .HasColumnName("trigger_name");

                    b.Property<string>("TriggerGroup")
                        .HasColumnType("text")
                        .HasColumnName("trigger_group");

                    b.Property<bool?>("BooleanProperty1")
                        .HasColumnType("bool")
                        .HasColumnName("bool_prop_1");

                    b.Property<bool?>("BooleanProperty2")
                        .HasColumnType("bool")
                        .HasColumnName("bool_prop_2");

                    b.Property<decimal?>("DecimalProperty1")
                        .HasColumnType("numeric")
                        .HasColumnName("dec_prop_1");

                    b.Property<decimal?>("DecimalProperty2")
                        .HasColumnType("numeric")
                        .HasColumnName("dec_prop_2");

                    b.Property<int?>("IntegerProperty1")
                        .HasColumnType("integer")
                        .HasColumnName("int_prop_1");

                    b.Property<int?>("IntegerProperty2")
                        .HasColumnType("integer")
                        .HasColumnName("int_prop_2");

                    b.Property<long?>("LongProperty1")
                        .HasColumnType("bigint")
                        .HasColumnName("long_prop_1");

                    b.Property<long?>("LongProperty2")
                        .HasColumnType("bigint")
                        .HasColumnName("long_prop_2");

                    b.Property<string>("StringProperty1")
                        .HasColumnType("text")
                        .HasColumnName("str_prop_1");

                    b.Property<string>("StringProperty2")
                        .HasColumnType("text")
                        .HasColumnName("str_prop_2");

                    b.Property<string>("StringProperty3")
                        .HasColumnType("text")
                        .HasColumnName("str_prop_3");

                    b.Property<string>("TimeZoneId")
                        .HasColumnType("text")
                        .HasColumnName("time_zone_id");

                    b.HasKey("SchedulerName", "TriggerName", "TriggerGroup");

                    b.ToTable("qrtz_simprop_triggers", "quartz");
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzSimpleTrigger", b =>
                {
                    b.Property<string>("SchedulerName")
                        .HasColumnType("text")
                        .HasColumnName("sched_name");

                    b.Property<string>("TriggerName")
                        .HasColumnType("text")
                        .HasColumnName("trigger_name");

                    b.Property<string>("TriggerGroup")
                        .HasColumnType("text")
                        .HasColumnName("trigger_group");

                    b.Property<long>("RepeatCount")
                        .HasColumnType("bigint")
                        .HasColumnName("repeat_count");

                    b.Property<long>("RepeatInterval")
                        .HasColumnType("bigint")
                        .HasColumnName("repeat_interval");

                    b.Property<long>("TimesTriggered")
                        .HasColumnType("bigint")
                        .HasColumnName("times_triggered");

                    b.HasKey("SchedulerName", "TriggerName", "TriggerGroup");

                    b.ToTable("qrtz_simple_triggers", "quartz");
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzTrigger", b =>
                {
                    b.Property<string>("SchedulerName")
                        .HasColumnType("text")
                        .HasColumnName("sched_name");

                    b.Property<string>("TriggerName")
                        .HasColumnType("text")
                        .HasColumnName("trigger_name");

                    b.Property<string>("TriggerGroup")
                        .HasColumnType("text")
                        .HasColumnName("trigger_group");

                    b.Property<string>("CalendarName")
                        .HasColumnType("text")
                        .HasColumnName("calendar_name");

                    b.Property<string>("Description")
                        .HasColumnType("text")
                        .HasColumnName("description");

                    b.Property<long?>("EndTime")
                        .HasColumnType("bigint")
                        .HasColumnName("end_time");

                    b.Property<byte[]>("JobData")
                        .HasColumnType("bytea")
                        .HasColumnName("job_data");

                    b.Property<string>("JobGroup")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("job_group");

                    b.Property<string>("JobName")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("job_name");

                    b.Property<short?>("MisfireInstruction")
                        .HasColumnType("smallint")
                        .HasColumnName("misfire_instr");

                    b.Property<long?>("NextFireTime")
                        .HasColumnType("bigint")
                        .HasColumnName("next_fire_time");

                    b.Property<long?>("PreviousFireTime")
                        .HasColumnType("bigint")
                        .HasColumnName("prev_fire_time");

                    b.Property<int?>("Priority")
                        .HasColumnType("integer")
                        .HasColumnName("priority");

                    b.Property<long>("StartTime")
                        .HasColumnType("bigint")
                        .HasColumnName("start_time");

                    b.Property<string>("TriggerState")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("trigger_state");

                    b.Property<string>("TriggerType")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("trigger_type");

                    b.HasKey("SchedulerName", "TriggerName", "TriggerGroup");

                    b.HasIndex("NextFireTime")
                        .HasDatabaseName("idx_qrtz_t_next_fire_time");

                    b.HasIndex("TriggerState")
                        .HasDatabaseName("idx_qrtz_t_state");

                    b.HasIndex("NextFireTime", "TriggerState")
                        .HasDatabaseName("idx_qrtz_t_nft_st");

                    b.HasIndex("SchedulerName", "JobName", "JobGroup");

                    b.ToTable("qrtz_triggers", "quartz");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.AdminNoteDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("ActorSystemIdentifier")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("actor_system_identifier");

                    b.Property<long?>("ActorTelegramUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("actor_telegram_user_id");

                    b.Property<string>("ActorWebUserId")
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("actor_web_user_id");

                    b.Property<DateTimeOffset>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("created_by");

                    b.Property<bool>("IsPinned")
                        .HasColumnType("boolean")
                        .HasColumnName("is_pinned");

                    b.Property<string>("NoteText")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)")
                        .HasColumnName("note_text");

                    b.Property<long>("TelegramUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("telegram_user_id");

                    b.Property<DateTimeOffset?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("updated_at");

                    b.HasKey("Id");

                    b.HasIndex("ActorTelegramUserId");

                    b.HasIndex("ActorWebUserId");

                    b.HasIndex("CreatedAt");

                    b.HasIndex("IsPinned");

                    b.HasIndex("TelegramUserId");

                    b.ToTable("admin_notes", t =>
                        {
                            t.HasCheckConstraint("CK_admin_notes_exclusive_actor", "(actor_web_user_id IS NOT NULL)::int + (actor_telegram_user_id IS NOT NULL)::int + (actor_system_identifier IS NOT NULL)::int = 1");
                        });
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.AuditLogRecordDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("ActorSystemIdentifier")
                        .HasColumnType("text")
                        .HasColumnName("actor_system_identifier");

                    b.Property<long?>("ActorTelegramUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("actor_telegram_user_id");

                    b.Property<string>("ActorWebUserId")
                        .HasColumnType("character varying(450)")
                        .HasColumnName("actor_web_user_id");

                    b.Property<int>("EventType")
                        .HasColumnType("integer")
                        .HasColumnName("event_type");

                    b.Property<string>("TargetSystemIdentifier")
                        .HasColumnType("text")
                        .HasColumnName("target_system_identifier");

                    b.Property<long?>("TargetTelegramUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("target_telegram_user_id");

                    b.Property<string>("TargetWebUserId")
                        .HasColumnType("character varying(450)")
                        .HasColumnName("target_web_user_id");

                    b.Property<DateTimeOffset>("Timestamp")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("timestamp");

                    b.Property<string>("Value")
                        .HasColumnType("text")
                        .HasColumnName("value");

                    b.HasKey("Id");

                    b.HasIndex("ActorTelegramUserId");

                    b.HasIndex("ActorWebUserId");

                    b.HasIndex("TargetTelegramUserId");

                    b.HasIndex("TargetWebUserId");

                    b.ToTable("audit_log", t =>
                        {
                            t.HasCheckConstraint("CK_audit_log_exclusive_actor", "(actor_web_user_id IS NOT NULL)::int + (actor_telegram_user_id IS NOT NULL)::int + (actor_system_identifier IS NOT NULL)::int = 1");

                            t.HasCheckConstraint("CK_audit_log_exclusive_target", "(target_web_user_id IS NULL AND target_telegram_user_id IS NULL AND target_system_identifier IS NULL) OR ((target_web_user_id IS NOT NULL)::int + (target_telegram_user_id IS NOT NULL)::int + (target_system_identifier IS NOT NULL)::int = 1)");
                        });
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.BlocklistSubscriptionDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTimeOffset>("AddedDate")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("added_date");

                    b.Property<int>("BlockMode")
                        .HasColumnType("integer")
                        .HasColumnName("block_mode");

                    b.Property<long>("ChatId")
                        .HasColumnType("bigint")
                        .HasColumnName("chat_id");

                    b.Property<bool>("Enabled")
                        .HasColumnType("boolean")
                        .HasColumnName("enabled");

                    b.Property<int?>("EntryCount")
                        .HasColumnType("integer")
                        .HasColumnName("entry_count");

                    b.Property<int>("Format")
                        .HasColumnType("integer")
                        .HasColumnName("format");

                    b.Property<bool>("IsBuiltIn")
                        .HasColumnType("boolean")
                        .HasColumnName("is_built_in");

                    b.Property<DateTimeOffset?>("LastFetched")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("last_fetched");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("name");

                    b.Property<string>("Notes")
                        .HasColumnType("text")
                        .HasColumnName("notes");

                    b.Property<int>("RefreshIntervalHours")
                        .HasColumnType("integer")
                        .HasColumnName("refresh_interval_hours");

                    b.Property<string>("SystemIdentifier")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("system_identifier");

                    b.Property<long?>("TelegramUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("telegram_user_id");

                    b.Property<string>("Url")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("url");

                    b.Property<string>("WebUserId")
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("web_user_id");

                    b.HasKey("Id");

                    b.HasIndex("BlockMode")
                        .HasFilter("block_mode > 0");

                    b.HasIndex("ChatId");

                    b.HasIndex("Enabled")
                        .HasFilter("enabled = true");

                    b.HasIndex("Url");

                    b.ToTable("blocklist_subscriptions");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.CachedBlockedDomainDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<int>("BlockMode")
                        .HasColumnType("integer")
                        .HasColumnName("block_mode");

                    b.Property<long>("ChatId")
                        .HasColumnType("bigint")
                        .HasColumnName("chat_id");

                    b.Property<string>("Domain")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("domain");

                    b.Property<DateTimeOffset>("FirstSeen")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("first_seen");

                    b.Property<DateTimeOffset>("LastVerified")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("last_verified");

                    b.Property<string>("Notes")
                        .HasColumnType("text")
                        .HasColumnName("notes");

                    b.Property<long?>("SourceSubscriptionId")
                        .HasColumnType("bigint")
                        .HasColumnName("source_subscription_id");

                    b.HasKey("Id");

                    b.HasIndex("LastVerified");

                    b.HasIndex("SourceSubscriptionId");

                    b.HasIndex("Domain", "BlockMode", "ChatId")
                        .IsUnique();

                    b.ToTable("cached_blocked_domains");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.ChatAdminRecordDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<long>("ChatId")
                        .HasColumnType("bigint")
                        .HasColumnName("chat_id");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean")
                        .HasColumnName("is_active");

                    b.Property<bool>("IsCreator")
                        .HasColumnType("boolean")
                        .HasColumnName("is_creator");

                    b.Property<DateTimeOffset>("LastVerifiedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("last_verified_at");

                    b.Property<DateTimeOffset>("PromotedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("promoted_at");

                    b.Property<long>("TelegramId")
                        .HasColumnType("bigint")
                        .HasColumnName("telegram_id");

                    b.HasKey("Id");

                    b.HasIndex("ChatId");

                    b.HasIndex("TelegramId");

                    b.ToTable("chat_admins");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.ChatPromptRecordDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("AddedBy")
                        .HasColumnType("text")
                        .HasColumnName("added_by");

                    b.Property<DateTimeOffset>("AddedDate")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("added_date");

                    b.Property<long>("ChatId")
                        .HasColumnType("bigint")
                        .HasColumnName("chat_id");

                    b.Property<string>("CustomPrompt")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("custom_prompt");

                    b.Property<bool>("Enabled")
                        .HasColumnType("boolean")
                        .HasColumnName("enabled");

                    b.Property<string>("Notes")
                        .HasColumnType("text")
                        .HasColumnName("notes");

                    b.HasKey("Id");

                    b.ToTable("chat_prompts");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.ConfigRecordDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("AIProviderConfig")
                        .HasColumnType("jsonb")
                        .HasColumnName("ai_provider_config");

                    b.Property<string>("ApiKeys")
                        .HasColumnType("text")
                        .HasColumnName("api_keys");

                    b.Property<string>("BackgroundJobsConfig")
                        .HasColumnType("jsonb")
                        .HasColumnName("background_jobs_config");

                    b.Property<string>("BackupEncryptionConfig")
                        .HasColumnType("jsonb")
                        .HasColumnName("backup_encryption_config");

                    b.Property<string>("BotProtectionConfig")
                        .HasColumnType("jsonb")
                        .HasColumnName("bot_protection_config");

                    b.Property<long>("ChatId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasDefaultValue(0L)
                        .HasColumnName("chat_id");

                    b.Property<string>("ContentDetectionConfig")
                        .HasColumnType("jsonb")
                        .HasColumnName("spam_detection_config");

                    b.Property<DateTimeOffset>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at")
                        .HasDefaultValueSql("NOW()");

                    b.Property<string>("FileScanningConfig")
                        .HasColumnType("jsonb")
                        .HasColumnName("file_scanning_config");

                    b.Property<string>("InviteLink")
                        .HasColumnType("text")
                        .HasColumnName("invite_link");

                    b.Property<string>("LogConfig")
                        .HasColumnType("jsonb")
                        .HasColumnName("log_config");

                    b.Property<string>("ModerationConfig")
                        .HasColumnType("jsonb")
                        .HasColumnName("moderation_config");

                    b.Property<string>("OpenAIConfig")
                        .HasColumnType("jsonb")
                        .HasColumnName("openai_config");

                    b.Property<string>("PassphraseEncrypted")
                        .HasColumnType("text")
                        .HasColumnName("passphrase_encrypted");

                    b.Property<string>("SendGridConfig")
                        .HasColumnType("jsonb")
                        .HasColumnName("sendgrid_config");

                    b.Property<string>("ServiceMessageDeletionConfig")
                        .HasColumnType("jsonb")
                        .HasColumnName("service_message_deletion_config");

                    b.Property<string>("TelegramBotConfig")
                        .HasColumnType("jsonb")
                        .HasColumnName("telegram_bot_config");

                    b.Property<string>("TelegramBotTokenEncrypted")
                        .HasColumnType("text")
                        .HasColumnName("telegram_bot_token_encrypted");

                    b.Property<DateTimeOffset?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("updated_at");

                    b.Property<string>("VapidPrivateKeyEncrypted")
                        .HasColumnType("text")
                        .HasColumnName("vapid_private_key_encrypted");

                    b.Property<string>("WebPushConfig")
                        .HasColumnType("jsonb")
                        .HasColumnName("web_push_config");

                    b.Property<string>("WelcomeConfig")
                        .HasColumnType("jsonb")
                        .HasColumnName("welcome_config");

                    b.HasKey("Id");

                    b.HasIndex("ChatId")
                        .IsUnique()
                        .HasDatabaseName("idx_configs_chat_specific")
                        .HasFilter("chat_id != 0");

                    b.ToTable("configs");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.ContentCheckConfigRecordDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<bool>("AlwaysRun")
                        .HasColumnType("boolean")
                        .HasColumnName("always_run");

                    b.Property<long>("ChatId")
                        .HasColumnType("bigint")
                        .HasColumnName("chat_id");

                    b.Property<string>("CheckName")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("check_name");

                    b.Property<int?>("ConfidenceThreshold")
                        .HasColumnType("integer")
                        .HasColumnName("confidence_threshold");

                    b.Property<string>("ConfigurationJson")
                        .HasColumnType("text")
                        .HasColumnName("configuration_json");

                    b.Property<bool>("Enabled")
                        .HasColumnType("boolean")
                        .HasColumnName("enabled");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text")
                        .HasColumnName("modified_by");

                    b.Property<DateTimeOffset>("ModifiedDate")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("modified_date");

                    b.HasKey("Id");

                    b.ToTable("content_check_configs");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.ContentDetectionConfigRecordDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<long?>("ChatId")
                        .HasColumnType("bigint")
                        .HasColumnName("chat_id");

                    b.Property<string>("ConfigJson")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("config_json");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("last_updated");

                    b.Property<string>("UpdatedBy")
                        .HasColumnType("text")
                        .HasColumnName("updated_by");

                    b.HasKey("Id");

                    b.ToTable("content_detection_configs");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.DetectionResultRecordDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("CheckResultsJson")
                        .HasColumnType("jsonb")
                        .HasColumnName("check_results_json");

                    b.Property<int>("Confidence")
                        .HasColumnType("integer")
                        .HasColumnName("confidence");

                    b.Property<DateTimeOffset>("DetectedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("detected_at");

                    b.Property<string>("DetectionMethod")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("detection_method");

                    b.Property<string>("DetectionSource")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("detection_source");

                    b.Property<int>("EditVersion")
                        .HasColumnType("integer")
                        .HasColumnName("edit_version");

                    b.Property<bool>("IsSpam")
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("boolean")
                        .HasColumnName("is_spam")
                        .HasComputedColumnSql("(net_confidence > 0)", true);

                    b.Property<long>("MessageId")
                        .HasColumnType("bigint")
                        .HasColumnName("message_id");

                    b.Property<int>("NetConfidence")
                        .HasColumnType("integer")
                        .HasColumnName("net_confidence");

                    b.Property<string>("Reason")
                        .HasColumnType("text")
                        .HasColumnName("reason");

                    b.Property<string>("SystemIdentifier")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("system_identifier");

                    b.Property<long?>("TelegramUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("telegram_user_id");

                    b.Property<bool>("UsedForTraining")
                        .HasColumnType("boolean")
                        .HasColumnName("used_for_training");

                    b.Property<string>("WebUserId")
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("web_user_id");

                    b.HasKey("Id");

                    b.HasIndex("CheckResultsJson")
                        .HasDatabaseName("ix_detection_results_check_results_json_gin");

                    NpgsqlIndexBuilderExtensions.HasMethod(b.HasIndex("CheckResultsJson"), "gin");

                    b.HasIndex("DetectedAt");

                    b.HasIndex("DetectionSource")
                        .HasDatabaseName("ix_detection_results_detection_source");

                    b.HasIndex("IsSpam")
                        .HasDatabaseName("ix_detection_results_is_spam");

                    b.HasIndex("MessageId");

                    b.HasIndex("TelegramUserId");

                    b.HasIndex("UsedForTraining");

                    b.HasIndex("WebUserId");

                    b.HasIndex("IsSpam", "DetectedAt")
                        .HasDatabaseName("ix_detection_results_is_spam_detected_at");

                    b.ToTable("detection_results", t =>
                        {
                            t.HasCheckConstraint("CK_detection_results_exclusive_actor", "(web_user_id IS NOT NULL)::int + (telegram_user_id IS NOT NULL)::int + (system_identifier IS NOT NULL)::int = 1");
                        });
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.DomainFilterDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTimeOffset>("AddedDate")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("added_date");

                    b.Property<int>("BlockMode")
                        .HasColumnType("integer")
                        .HasColumnName("block_mode");

                    b.Property<long>("ChatId")
                        .HasColumnType("bigint")
                        .HasColumnName("chat_id");

                    b.Property<string>("Domain")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("domain");

                    b.Property<bool>("Enabled")
                        .HasColumnType("boolean")
                        .HasColumnName("enabled");

                    b.Property<int>("FilterType")
                        .HasColumnType("integer")
                        .HasColumnName("filter_type");

                    b.Property<string>("Notes")
                        .HasColumnType("text")
                        .HasColumnName("notes");

                    b.Property<string>("SystemIdentifier")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("system_identifier");

                    b.Property<long?>("TelegramUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("telegram_user_id");

                    b.Property<string>("WebUserId")
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("web_user_id");

                    b.HasKey("Id");

                    b.HasIndex("ChatId");

                    b.HasIndex("Domain");

                    b.HasIndex("FilterType", "BlockMode")
                        .HasFilter("enabled = true");

                    b.ToTable("domain_filters");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.FileScanQuotaRecord", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<int>("Count")
                        .HasColumnType("integer")
                        .HasColumnName("count");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("last_updated");

                    b.Property<int>("LimitValue")
                        .HasColumnType("integer")
                        .HasColumnName("limit_value");

                    b.Property<string>("QuotaType")
                        .IsRequired()
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)")
                        .HasColumnName("quota_type");

                    b.Property<DateTimeOffset>("QuotaWindowEnd")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("quota_window_end");

                    b.Property<DateTimeOffset>("QuotaWindowStart")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("quota_window_start");

                    b.Property<string>("Service")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("service");

                    b.HasKey("Id");

                    b.HasIndex("Service", "QuotaType", "QuotaWindowEnd");

                    b.HasIndex("Service", "QuotaType", "QuotaWindowStart")
                        .IsUnique();

                    b.ToTable("file_scan_quota");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.FileScanResultRecord", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("FileHash")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)")
                        .HasColumnName("file_hash");

                    b.Property<string>("Metadata")
                        .HasColumnType("jsonb")
                        .HasColumnName("metadata");

                    b.Property<string>("Result")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasColumnName("result");

                    b.Property<int?>("ScanDurationMs")
                        .HasColumnType("integer")
                        .HasColumnName("scan_duration_ms");

                    b.Property<DateTimeOffset>("ScannedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("scanned_at");

                    b.Property<string>("Scanner")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("scanner");

                    b.Property<string>("ThreatName")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("threat_name");

                    b.HasKey("Id");

                    b.HasIndex("FileHash");

                    b.HasIndex("Scanner", "ScannedAt");

                    b.ToTable("file_scan_results");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.ImageTrainingSampleDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<int>("FileSizeBytes")
                        .HasColumnType("integer")
                        .HasColumnName("file_size_bytes");

                    b.Property<int>("Height")
                        .HasColumnType("integer")
                        .HasColumnName("height");

                    b.Property<bool>("IsSpam")
                        .HasColumnType("boolean")
                        .HasColumnName("is_spam");

                    b.Property<DateTimeOffset>("MarkedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("marked_at");

                    b.Property<string>("MarkedBySystemIdentifier")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("marked_by_system_identifier");

                    b.Property<long?>("MarkedByTelegramUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("marked_by_telegram_user_id");

                    b.Property<string>("MarkedByWebUserId")
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("marked_by_web_user_id");

                    b.Property<long>("MessageId")
                        .HasColumnType("bigint")
                        .HasColumnName("message_id");

                    b.Property<byte[]>("PhotoHash")
                        .IsRequired()
                        .HasColumnType("bytea")
                        .HasColumnName("photo_hash");

                    b.Property<string>("PhotoPath")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("photo_path");

                    b.Property<int>("Width")
                        .HasColumnType("integer")
                        .HasColumnName("width");

                    b.HasKey("Id");

                    b.HasIndex("MarkedByTelegramUserId");

                    b.HasIndex("MarkedByWebUserId");

                    b.HasIndex("MessageId")
                        .IsUnique();

                    b.HasIndex("IsSpam", "MarkedAt");

                    b.ToTable("image_training_samples", null, t =>
                        {
                            t.HasCheckConstraint("CK_image_training_exclusive_actor", "(marked_by_web_user_id IS NOT NULL)::int + (marked_by_telegram_user_id IS NOT NULL)::int + (marked_by_system_identifier IS NOT NULL)::int = 1");
                        });
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.ImpersonationAlertRecordDto", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<bool>("AutoBanned")
                        .HasColumnType("boolean")
                        .HasColumnName("auto_banned");

                    b.Property<long>("ChatId")
                        .HasColumnType("bigint")
                        .HasColumnName("chat_id");

                    b.Property<DateTimeOffset>("DetectedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("detected_at");

                    b.Property<bool>("NameMatch")
                        .HasColumnType("boolean")
                        .HasColumnName("name_match");

                    b.Property<bool>("PhotoMatch")
                        .HasColumnType("boolean")
                        .HasColumnName("photo_match");

                    b.Property<double?>("PhotoSimilarityScore")
                        .HasColumnType("double precision")
                        .HasColumnName("photo_similarity_score");

                    b.Property<DateTimeOffset?>("ReviewedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("reviewed_at");

                    b.Property<string>("ReviewedByUserId")
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("reviewed_by_user_id");

                    b.Property<int>("RiskLevel")
                        .HasColumnType("integer")
                        .HasColumnName("risk_level");

                    b.Property<long>("SuspectedUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("suspected_user_id");

                    b.Property<long>("TargetUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("target_user_id");

                    b.Property<int>("TotalScore")
                        .HasColumnType("integer")
                        .HasColumnName("total_score");

                    b.Property<int?>("Verdict")
                        .HasColumnType("integer")
                        .HasColumnName("verdict");

                    b.HasKey("Id");

                    b.HasIndex("ChatId");

                    b.HasIndex("ReviewedByUserId");

                    b.HasIndex("SuspectedUserId");

                    b.HasIndex("TargetUserId");

                    b.HasIndex("RiskLevel", "DetectedAt")
                        .HasFilter("reviewed_at IS NULL");

                    b.ToTable("impersonation_alerts");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.InviteRecordDto", b =>
                {
                    b.Property<string>("Token")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)")
                        .HasColumnName("token");

                    b.Property<DateTimeOffset>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("character varying(450)")
                        .HasColumnName("created_by");

                    b.Property<DateTimeOffset>("ExpiresAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("expires_at");

                    b.Property<DateTimeOffset?>("ModifiedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("modified_at");

                    b.Property<int>("PermissionLevel")
                        .HasColumnType("integer")
                        .HasColumnName("permission_level");

                    b.Property<int>("Status")
                        .HasColumnType("integer")
                        .HasColumnName("status");

                    b.Property<string>("UsedBy")
                        .HasColumnType("character varying(450)")
                        .HasColumnName("used_by");

                    b.Property<string>("UserRecordDtoId")
                        .HasColumnType("character varying(450)");

                    b.HasKey("Token");

                    b.HasIndex("CreatedBy");

                    b.HasIndex("UsedBy");

                    b.HasIndex("UserRecordDtoId");

                    b.ToTable("invites");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.LinkedChannelRecordDto", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<string>("ChannelIconPath")
                        .HasColumnType("text")
                        .HasColumnName("channel_icon_path");

                    b.Property<long>("ChannelId")
                        .HasColumnType("bigint")
                        .HasColumnName("channel_id");

                    b.Property<string>("ChannelName")
                        .HasColumnType("text")
                        .HasColumnName("channel_name");

                    b.Property<DateTimeOffset>("LastSynced")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("last_synced");

                    b.Property<long>("ManagedChatId")
                        .HasColumnType("bigint")
                        .HasColumnName("managed_chat_id");

                    b.Property<byte[]>("PhotoHash")
                        .HasColumnType("bytea")
                        .HasColumnName("photo_hash");

                    b.HasKey("Id");

                    b.HasIndex("ChannelId");

                    b.HasIndex("ManagedChatId")
                        .IsUnique();

                    b.ToTable("linked_channels");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.ManagedChatRecordDto", b =>
                {
                    b.Property<long>("ChatId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("chat_id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("ChatId"));

                    b.Property<DateTimeOffset>("AddedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("added_at");

                    b.Property<int>("BotStatus")
                        .HasColumnType("integer")
                        .HasColumnName("bot_status");

                    b.Property<string>("ChatIconPath")
                        .HasColumnType("text")
                        .HasColumnName("chat_icon_path");

                    b.Property<string>("ChatName")
                        .HasColumnType("text")
                        .HasColumnName("chat_name");

                    b.Property<int>("ChatType")
                        .HasColumnType("integer")
                        .HasColumnName("chat_type");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean")
                        .HasColumnName("is_active");

                    b.Property<bool>("IsAdmin")
                        .HasColumnType("boolean")
                        .HasColumnName("is_admin");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean")
                        .HasColumnName("is_deleted");

                    b.Property<DateTimeOffset?>("LastSeenAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("last_seen_at");

                    b.Property<string>("SettingsJson")
                        .HasColumnType("text")
                        .HasColumnName("settings_json");

                    b.HasKey("ChatId");

                    b.ToTable("managed_chats");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.MessageEditRecordDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTimeOffset>("EditDate")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("edit_date");

                    b.Property<long>("MessageId")
                        .HasColumnType("bigint")
                        .HasColumnName("message_id");

                    b.Property<string>("NewContentHash")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)")
                        .HasColumnName("new_content_hash");

                    b.Property<string>("NewText")
                        .HasColumnType("text")
                        .HasColumnName("new_text");

                    b.Property<string>("OldContentHash")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)")
                        .HasColumnName("old_content_hash");

                    b.Property<string>("OldText")
                        .HasColumnType("text")
                        .HasColumnName("old_text");

                    b.HasKey("Id");

                    b.HasIndex("MessageId");

                    b.ToTable("message_edits");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.MessageRecordDto", b =>
                {
                    b.Property<long>("MessageId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("message_id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("MessageId"));

                    b.Property<long>("ChatId")
                        .HasColumnType("bigint")
                        .HasColumnName("chat_id");

                    b.Property<int>("ContentCheckSkipReason")
                        .HasColumnType("integer")
                        .HasColumnName("content_check_skip_reason");

                    b.Property<string>("ContentHash")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)")
                        .HasColumnName("content_hash");

                    b.Property<DateTimeOffset?>("DeletedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("deleted_at");

                    b.Property<string>("DeletionSource")
                        .HasColumnType("text")
                        .HasColumnName("deletion_source");

                    b.Property<DateTimeOffset?>("EditDate")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("edit_date");

                    b.Property<int?>("MediaDuration")
                        .HasColumnType("integer")
                        .HasColumnName("media_duration");

                    b.Property<string>("MediaFileId")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasColumnName("media_file_id");

                    b.Property<string>("MediaFileName")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("media_file_name");

                    b.Property<long?>("MediaFileSize")
                        .HasColumnType("bigint")
                        .HasColumnName("media_file_size");

                    b.Property<string>("MediaLocalPath")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("media_local_path");

                    b.Property<string>("MediaMimeType")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("media_mime_type");

                    b.Property<int?>("MediaType")
                        .HasColumnType("integer")
                        .HasColumnName("media_type");

                    b.Property<string>("MessageText")
                        .HasColumnType("text")
                        .HasColumnName("message_text");

                    b.Property<string>("PhotoFileId")
                        .HasColumnType("text")
                        .HasColumnName("photo_file_id");

                    b.Property<int?>("PhotoFileSize")
                        .HasColumnType("integer")
                        .HasColumnName("photo_file_size");

                    b.Property<string>("PhotoLocalPath")
                        .HasColumnType("text")
                        .HasColumnName("photo_local_path");

                    b.Property<string>("PhotoThumbnailPath")
                        .HasColumnType("text")
                        .HasColumnName("photo_thumbnail_path");

                    b.Property<long?>("ReplyToMessageId")
                        .HasColumnType("bigint")
                        .HasColumnName("reply_to_message_id");

                    b.Property<long?>("SimilarityHash")
                        .HasColumnType("bigint")
                        .HasColumnName("similarity_hash");

                    b.Property<DateTimeOffset>("Timestamp")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("timestamp");

                    b.Property<string>("Urls")
                        .HasColumnType("text")
                        .HasColumnName("urls");

                    b.Property<long>("UserId")
                        .HasColumnType("bigint")
                        .HasColumnName("user_id");

                    b.HasKey("MessageId");

                    b.HasIndex("ChatId");

                    b.HasIndex("ContentHash");

                    b.HasIndex("ReplyToMessageId");

                    b.HasIndex("SimilarityHash")
                        .HasDatabaseName("ix_messages_similarity_hash")
                        .HasFilter("similarity_hash IS NOT NULL");

                    b.HasIndex("Timestamp");

                    b.HasIndex("UserId");

                    b.HasIndex("Timestamp", "DeletedAt");

                    b.ToTable("messages");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.MessageTranslationDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<decimal?>("Confidence")
                        .HasColumnType("numeric")
                        .HasColumnName("confidence");

                    b.Property<string>("DetectedLanguage")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("detected_language");

                    b.Property<long?>("EditId")
                        .HasColumnType("bigint")
                        .HasColumnName("edit_id");

                    b.Property<long?>("MessageId")
                        .HasColumnType("bigint")
                        .HasColumnName("message_id");

                    b.Property<long?>("SimilarityHash")
                        .HasColumnType("bigint")
                        .HasColumnName("similarity_hash");

                    b.Property<DateTimeOffset>("TranslatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("translated_at");

                    b.Property<string>("TranslatedText")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("translated_text");

                    b.HasKey("Id");

                    b.HasIndex("DetectedLanguage");

                    b.HasIndex("EditId")
                        .IsUnique()
                        .HasFilter("edit_id IS NOT NULL");

                    b.HasIndex("MessageId")
                        .IsUnique()
                        .HasFilter("message_id IS NOT NULL");

                    b.HasIndex("SimilarityHash")
                        .HasDatabaseName("ix_message_translations_similarity_hash")
                        .HasFilter("similarity_hash IS NOT NULL");

                    b.ToTable("message_translations", t =>
                        {
                            t.HasCheckConstraint("CK_message_translations_exclusive_source", "(message_id IS NOT NULL)::int + (edit_id IS NOT NULL)::int = 1");
                        });
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.NotificationPreferencesDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("Config")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasColumnName("config");

                    b.Property<DateTimeOffset>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<DateTimeOffset>("UpdatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("updated_at");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("user_id");

                    b.HasKey("Id");

                    b.ToTable("notification_preferences");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.PendingNotificationRecordDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTimeOffset>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<DateTimeOffset>("ExpiresAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("expires_at");

                    b.Property<string>("MessageText")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("message_text");

                    b.Property<string>("NotificationType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("notification_type");

                    b.Property<int>("RetryCount")
                        .HasColumnType("integer")
                        .HasColumnName("retry_count");

                    b.Property<long>("TelegramUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("telegram_user_id");

                    b.HasKey("Id");

                    b.HasIndex("ExpiresAt");

                    b.HasIndex("TelegramUserId");

                    b.HasIndex("NotificationType", "CreatedAt");

                    b.ToTable("pending_notifications");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.PromptVersionDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<long>("ChatId")
                        .HasColumnType("bigint")
                        .HasColumnName("chat_id");

                    b.Property<DateTimeOffset>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<string>("CreatedBy")
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("created_by");

                    b.Property<string>("GenerationMetadata")
                        .HasColumnType("jsonb")
                        .HasColumnName("generation_metadata");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean")
                        .HasColumnName("is_active");

                    b.Property<string>("PromptText")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("prompt_text");

                    b.Property<int>("Version")
                        .HasColumnType("integer")
                        .HasColumnName("version");

                    b.HasKey("Id");

                    b.ToTable("prompt_versions");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.PushSubscriptionDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("Auth")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("auth");

                    b.Property<DateTimeOffset>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<string>("Endpoint")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("endpoint");

                    b.Property<string>("P256dh")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("p256dh");

                    b.Property<string>("UserAgent")
                        .HasColumnType("text")
                        .HasColumnName("user_agent");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("user_id");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.HasIndex("UserId", "Endpoint")
                        .IsUnique();

                    b.ToTable("push_subscriptions");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.RawAlgorithmPerformanceStatsDto", b =>
                {
                    b.Property<double>("AverageMs")
                        .HasColumnType("double precision");

                    b.Property<int>("CheckNameEnum")
                        .HasColumnType("integer");

                    b.Property<double>("MaxMs")
                        .HasColumnType("double precision");

                    b.Property<double>("MinMs")
                        .HasColumnType("double precision");

                    b.Property<double>("P95Ms")
                        .HasColumnType("double precision");

                    b.Property<int>("TotalExecutions")
                        .HasColumnType("integer");

                    b.Property<double>("TotalTimeContribution")
                        .HasColumnType("double precision");

                    b.ToTable((string)null);

                    b.ToView(null, (string)null);
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.RecoveryCodeRecordDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("CodeHash")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("code_hash");

                    b.Property<DateTimeOffset?>("UsedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("used_at");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasColumnType("character varying(450)")
                        .HasColumnName("user_id");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.ToTable("recovery_codes");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.ReportDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("ActionTaken")
                        .HasColumnType("text")
                        .HasColumnName("action_taken");

                    b.Property<string>("AdminNotes")
                        .HasColumnType("text")
                        .HasColumnName("admin_notes");

                    b.Property<long>("ChatId")
                        .HasColumnType("bigint")
                        .HasColumnName("chat_id");

                    b.Property<int>("MessageId")
                        .HasColumnType("integer")
                        .HasColumnName("message_id");

                    b.Property<int?>("ReportCommandMessageId")
                        .HasColumnType("integer")
                        .HasColumnName("report_command_message_id");

                    b.Property<DateTimeOffset>("ReportedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("reported_at");

                    b.Property<long?>("ReportedByUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("reported_by_user_id");

                    b.Property<string>("ReportedByUserName")
                        .HasColumnType("text")
                        .HasColumnName("reported_by_user_name");

                    b.Property<DateTimeOffset?>("ReviewedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("reviewed_at");

                    b.Property<string>("ReviewedBy")
                        .HasColumnType("text")
                        .HasColumnName("reviewed_by");

                    b.Property<int>("Status")
                        .HasColumnType("integer")
                        .HasColumnName("status");

                    b.Property<string>("WebUserId")
                        .HasColumnType("character varying(450)")
                        .HasColumnName("web_user_id");

                    b.HasKey("Id");

                    b.HasIndex("WebUserId");

                    b.HasIndex("MessageId", "ChatId")
                        .IsUnique()
                        .HasDatabaseName("IX_reports_unique_pending_per_message")
                        .HasFilter("status = 0");

                    b.ToTable("reports");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.StopWordDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTimeOffset>("AddedDate")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("added_date");

                    b.Property<bool>("Enabled")
                        .HasColumnType("boolean")
                        .HasColumnName("enabled");

                    b.Property<string>("Notes")
                        .HasColumnType("text")
                        .HasColumnName("notes");

                    b.Property<string>("SystemIdentifier")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("system_identifier");

                    b.Property<long?>("TelegramUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("telegram_user_id");

                    b.Property<string>("WebUserId")
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("web_user_id");

                    b.Property<string>("Word")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("word");

                    b.HasKey("Id");

                    b.HasIndex("TelegramUserId");

                    b.HasIndex("WebUserId");

                    b.ToTable("stop_words", t =>
                        {
                            t.HasCheckConstraint("CK_stop_words_exclusive_actor", "(web_user_id IS NOT NULL)::int + (telegram_user_id IS NOT NULL)::int + (system_identifier IS NOT NULL)::int = 1");
                        });
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.TagDefinitionDto", b =>
                {
                    b.Property<string>("TagName")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("tag_name");

                    b.Property<int>("Color")
                        .HasColumnType("integer")
                        .HasColumnName("color");

                    b.Property<DateTimeOffset>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<int>("UsageCount")
                        .HasColumnType("integer")
                        .HasColumnName("usage_count");

                    b.HasKey("TagName");

                    b.HasIndex("UsageCount");

                    b.ToTable("tag_definitions");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.TelegramLinkTokenRecordDto", b =>
                {
                    b.Property<string>("Token")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)")
                        .HasColumnName("token");

                    b.Property<DateTimeOffset>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<DateTimeOffset>("ExpiresAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("expires_at");

                    b.Property<DateTimeOffset?>("UsedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("used_at");

                    b.Property<long?>("UsedByTelegramId")
                        .HasColumnType("bigint")
                        .HasColumnName("used_by_telegram_id");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasColumnType("character varying(450)")
                        .HasColumnName("user_id");

                    b.Property<string>("UserRecordDtoId")
                        .HasColumnType("character varying(450)");

                    b.HasKey("Token");

                    b.HasIndex("UserId");

                    b.HasIndex("UserRecordDtoId");

                    b.ToTable("telegram_link_tokens");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.TelegramUserDto", b =>
                {
                    b.Property<long>("TelegramUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("telegram_user_id");

                    b.Property<DateTimeOffset?>("BanExpiresAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("ban_expires_at");

                    b.Property<bool>("BotDmEnabled")
                        .HasColumnType("boolean")
                        .HasColumnName("bot_dm_enabled");

                    b.Property<DateTimeOffset>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<string>("FirstName")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)")
                        .HasColumnName("first_name");

                    b.Property<DateTimeOffset>("FirstSeenAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("first_seen_at");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean")
                        .HasColumnName("is_active");

                    b.Property<bool>("IsBanned")
                        .HasColumnType("boolean")
                        .HasColumnName("is_banned");

                    b.Property<bool>("IsBot")
                        .HasColumnType("boolean")
                        .HasColumnName("is_bot");

                    b.Property<bool>("IsTrusted")
                        .HasColumnType("boolean")
                        .HasColumnName("is_trusted");

                    b.Property<string>("LastName")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)")
                        .HasColumnName("last_name");

                    b.Property<DateTimeOffset>("LastSeenAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("last_seen_at");

                    b.Property<string>("PhotoFileUniqueId")
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)")
                        .HasColumnName("photo_file_unique_id");

                    b.Property<string>("PhotoHash")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)")
                        .HasColumnName("photo_hash");

                    b.Property<DateTimeOffset>("UpdatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("updated_at");

                    b.Property<string>("UserPhotoPath")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("user_photo_path");

                    b.Property<string>("Username")
                        .HasMaxLength(32)
                        .HasColumnType("character varying(32)")
                        .HasColumnName("username");

                    b.HasKey("TelegramUserId");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("ix_telegram_users_is_active")
                        .HasFilter("is_active = false");

                    b.HasIndex("IsBanned");

                    b.HasIndex("IsTrusted");

                    b.HasIndex("LastSeenAt");

                    b.HasIndex("Username");

                    b.ToTable("telegram_users");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.TelegramUserMappingRecordDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean")
                        .HasColumnName("is_active");

                    b.Property<DateTimeOffset>("LinkedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("linked_at");

                    b.Property<long>("TelegramId")
                        .HasColumnType("bigint")
                        .HasColumnName("telegram_id");

                    b.Property<string>("TelegramUsername")
                        .HasColumnType("text")
                        .HasColumnName("telegram_username");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasColumnType("character varying(450)")
                        .HasColumnName("user_id");

                    b.HasKey("Id");

                    b.HasIndex("TelegramId")
                        .IsUnique();

                    b.HasIndex("UserId");

                    b.ToTable("telegram_user_mappings");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.ThresholdRecommendationDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("AlgorithmName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("algorithm_name");

                    b.Property<decimal>("ConfidenceScore")
                        .HasColumnType("numeric")
                        .HasColumnName("confidence_score");

                    b.Property<DateTimeOffset>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<decimal?>("CurrentThreshold")
                        .HasColumnType("numeric")
                        .HasColumnName("current_threshold");

                    b.Property<decimal?>("EstimatedVetoRateAfter")
                        .HasColumnType("numeric")
                        .HasColumnName("estimated_veto_rate_after");

                    b.Property<decimal>("RecommendedThreshold")
                        .HasColumnType("numeric")
                        .HasColumnName("recommended_threshold");

                    b.Property<string>("ReviewNotes")
                        .HasColumnType("text")
                        .HasColumnName("review_notes");

                    b.Property<DateTimeOffset?>("ReviewedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("reviewed_at");

                    b.Property<string>("ReviewedByUserId")
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("reviewed_by_user_id");

                    b.PrimitiveCollection<long[]>("SampleVetoedMessageIds")
                        .HasColumnType("bigint[]")
                        .HasColumnName("sample_vetoed_message_ids");

                    b.Property<int>("SpamFlagsCount")
                        .HasColumnType("integer")
                        .HasColumnName("spam_flags_count");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasColumnName("status");

                    b.Property<DateTimeOffset>("TrainingPeriodEnd")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("training_period_end");

                    b.Property<DateTimeOffset>("TrainingPeriodStart")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("training_period_start");

                    b.Property<decimal>("VetoRateBefore")
                        .HasColumnType("numeric")
                        .HasColumnName("veto_rate_before");

                    b.Property<int>("VetoedCount")
                        .HasColumnType("integer")
                        .HasColumnName("vetoed_count");

                    b.HasKey("Id");

                    b.HasIndex("CreatedAt");

                    b.HasIndex("ReviewedByUserId");

                    b.HasIndex("Status");

                    b.HasIndex("AlgorithmName", "Status");

                    b.ToTable("threshold_recommendations");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.TrainingLabelDto", b =>
                {
                    b.Property<long>("MessageId")
                        .HasColumnType("bigint")
                        .HasColumnName("message_id");

                    b.Property<long?>("AuditLogId")
                        .HasColumnType("bigint")
                        .HasColumnName("audit_log_id");

                    b.Property<short>("Label")
                        .HasColumnType("smallint")
                        .HasColumnName("label");

                    b.Property<DateTimeOffset>("LabeledAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("labeled_at");

                    b.Property<long?>("LabeledByUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("labeled_by_user_id");

                    b.Property<string>("Reason")
                        .HasColumnType("text")
                        .HasColumnName("reason");

                    b.HasKey("MessageId");

                    b.HasIndex("Label");

                    b.HasIndex("LabeledByUserId");

                    b.HasIndex("Label", "LabeledAt");

                    b.ToTable("training_labels", t =>
                        {
                            t.HasCheckConstraint("CK_training_labels_label", "label IN ('spam', 'ham')");
                        });
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.UserActionRecordDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<int>("ActionType")
                        .HasColumnType("integer")
                        .HasColumnName("action_type");

                    b.Property<DateTimeOffset?>("ExpiresAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("expires_at");

                    b.Property<DateTimeOffset>("IssuedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("issued_at");

                    b.Property<long?>("MessageId")
                        .HasColumnType("bigint")
                        .HasColumnName("message_id");

                    b.Property<string>("Reason")
                        .HasColumnType("text")
                        .HasColumnName("reason");

                    b.Property<string>("SystemIdentifier")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("system_identifier");

                    b.Property<long?>("TelegramUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("telegram_user_id");

                    b.Property<long>("UserId")
                        .HasColumnType("bigint")
                        .HasColumnName("user_id");

                    b.Property<string>("WebUserId")
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("web_user_id");

                    b.HasKey("Id");

                    b.HasIndex("IssuedAt");

                    b.HasIndex("MessageId");

                    b.HasIndex("TelegramUserId");

                    b.HasIndex("UserId");

                    b.HasIndex("WebUserId");

                    b.ToTable("user_actions", t =>
                        {
                            t.HasCheckConstraint("CK_user_actions_exclusive_actor", "(web_user_id IS NOT NULL)::int + (telegram_user_id IS NOT NULL)::int + (system_identifier IS NOT NULL)::int = 1");
                        });
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.UserRecordDto", b =>
                {
                    b.Property<string>("Id")
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("id");

                    b.Property<DateTimeOffset>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)")
                        .HasColumnName("email");

                    b.Property<string>("EmailVerificationToken")
                        .HasColumnType("text")
                        .HasColumnName("email_verification_token");

                    b.Property<DateTimeOffset?>("EmailVerificationTokenExpiresAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("email_verification_token_expires_at");

                    b.Property<bool>("EmailVerified")
                        .HasColumnType("boolean")
                        .HasColumnName("email_verified");

                    b.Property<int>("FailedLoginAttempts")
                        .HasColumnType("integer")
                        .HasColumnName("failed_login_attempts");

                    b.Property<string>("InvitedBy")
                        .HasColumnType("character varying(450)")
                        .HasColumnName("invited_by");

                    b.Property<string>("InvitedByUserId")
                        .HasColumnType("character varying(450)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean")
                        .HasColumnName("is_active");

                    b.Property<DateTimeOffset?>("LastLoginAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("last_login_at");

                    b.Property<DateTimeOffset?>("LockedUntil")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("locked_until");

                    b.Property<DateTimeOffset?>("ModifiedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("modified_at");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text")
                        .HasColumnName("modified_by");

                    b.Property<string>("NormalizedEmail")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)")
                        .HasColumnName("normalized_email");

                    b.Property<string>("PasswordHash")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("password_hash");

                    b.Property<string>("PasswordResetToken")
                        .HasColumnType("text")
                        .HasColumnName("password_reset_token");

                    b.Property<DateTimeOffset?>("PasswordResetTokenExpiresAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("password_reset_token_expires_at");

                    b.Property<int>("PermissionLevel")
                        .HasColumnType("integer")
                        .HasColumnName("permission_level");

                    b.Property<string>("SecurityStamp")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("security_stamp");

                    b.Property<int>("Status")
                        .HasColumnType("integer")
                        .HasColumnName("status");

                    b.Property<bool>("TotpEnabled")
                        .HasColumnType("boolean")
                        .HasColumnName("totp_enabled");

                    b.Property<string>("TotpSecret")
                        .HasColumnType("text")
                        .HasColumnName("totp_secret");

                    b.Property<DateTimeOffset?>("TotpSetupStartedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("totp_setup_started_at");

                    b.HasKey("Id");

                    b.HasIndex("InvitedBy");

                    b.HasIndex("InvitedByUserId");

                    b.HasIndex("NormalizedEmail")
                        .IsUnique();

                    b.ToTable("users");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.UserTagDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("ActorSystemIdentifier")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("actor_system_identifier");

                    b.Property<long?>("ActorTelegramUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("actor_telegram_user_id");

                    b.Property<string>("ActorWebUserId")
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("actor_web_user_id");

                    b.Property<DateTimeOffset>("AddedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("added_at");

                    b.Property<DateTimeOffset?>("RemovedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("removed_at");

                    b.Property<string>("RemovedBySystemIdentifier")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("removed_by_system_identifier");

                    b.Property<long?>("RemovedByTelegramUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("removed_by_telegram_user_id");

                    b.Property<string>("RemovedByWebUserId")
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("removed_by_web_user_id");

                    b.Property<string>("TagName")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("tag_name");

                    b.Property<long>("TelegramUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("telegram_user_id");

                    b.HasKey("Id");

                    b.HasIndex("ActorTelegramUserId");

                    b.HasIndex("ActorWebUserId");

                    b.HasIndex("RemovedAt");

                    b.HasIndex("TagName");

                    b.HasIndex("TelegramUserId");

                    b.ToTable("user_tags", t =>
                        {
                            t.HasCheckConstraint("CK_user_tags_exclusive_actor", "(actor_web_user_id IS NOT NULL)::int + (actor_telegram_user_id IS NOT NULL)::int + (actor_system_identifier IS NOT NULL)::int = 1");
                        });
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.VerificationTokenDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTimeOffset>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<DateTimeOffset>("ExpiresAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("expires_at");

                    b.Property<string>("Token")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)")
                        .HasColumnName("token");

                    b.Property<string>("TokenTypeString")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("token_type");

                    b.Property<DateTimeOffset?>("UsedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("used_at");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasColumnType("character varying(450)")
                        .HasColumnName("user_id");

                    b.Property<string>("Value")
                        .HasColumnType("text")
                        .HasColumnName("value");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.ToTable("verification_tokens");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.VideoTrainingSampleDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<decimal>("DurationSeconds")
                        .HasColumnType("decimal(5,2)")
                        .HasColumnName("duration_seconds");

                    b.Property<int>("FileSizeBytes")
                        .HasColumnType("integer")
                        .HasColumnName("file_size_bytes");

                    b.Property<bool>("HasAudio")
                        .HasColumnType("boolean")
                        .HasColumnName("has_audio");

                    b.Property<int>("Height")
                        .HasColumnType("integer")
                        .HasColumnName("height");

                    b.Property<bool>("IsSpam")
                        .HasColumnType("boolean")
                        .HasColumnName("is_spam");

                    b.Property<string>("KeyframeHashes")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasColumnName("keyframe_hashes");

                    b.Property<DateTimeOffset>("MarkedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("marked_at");

                    b.Property<string>("MarkedBySystemIdentifier")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("marked_by_system_identifier");

                    b.Property<long?>("MarkedByTelegramUserId")
                        .HasColumnType("bigint")
                        .HasColumnName("marked_by_telegram_user_id");

                    b.Property<string>("MarkedByWebUserId")
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("marked_by_web_user_id");

                    b.Property<long>("MessageId")
                        .HasColumnType("bigint")
                        .HasColumnName("message_id");

                    b.Property<string>("VideoPath")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("video_path");

                    b.Property<int>("Width")
                        .HasColumnType("integer")
                        .HasColumnName("width");

                    b.HasKey("Id");

                    b.HasIndex("MessageId")
                        .IsUnique();

                    b.HasIndex("IsSpam", "MarkedAt");

                    b.ToTable("video_training_samples", null, t =>
                        {
                            t.HasCheckConstraint("CK_video_training_exclusive_actor", "(marked_by_web_user_id IS NOT NULL)::int + (marked_by_telegram_user_id IS NOT NULL)::int + (marked_by_system_identifier IS NOT NULL)::int = 1");
                        });
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.WebNotificationDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTimeOffset>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<int>("EventType")
                        .HasColumnType("integer")
                        .HasColumnName("event_type");

                    b.Property<bool>("IsRead")
                        .HasColumnType("boolean")
                        .HasColumnName("is_read");

                    b.Property<string>("Message")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("message");

                    b.Property<DateTimeOffset?>("ReadAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("read_at");

                    b.Property<string>("Subject")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("subject");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)")
                        .HasColumnName("user_id");

                    b.HasKey("Id");

                    b.HasIndex("UserId", "CreatedAt")
                        .HasDatabaseName("ix_web_notifications_user_id_created_at");

                    b.ToTable("web_notifications");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.WelcomeResponseDto", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<long>("ChatId")
                        .HasColumnType("bigint")
                        .HasColumnName("chat_id");

                    b.Property<DateTimeOffset>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<bool>("DmFallback")
                        .HasColumnType("boolean")
                        .HasColumnName("dm_fallback");

                    b.Property<bool>("DmSent")
                        .HasColumnType("boolean")
                        .HasColumnName("dm_sent");

                    b.Property<DateTimeOffset>("RespondedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("responded_at");

                    b.Property<int>("Response")
                        .HasColumnType("integer")
                        .HasColumnName("response");

                    b.Property<string>("TimeoutJobId")
                        .HasColumnType("text")
                        .HasColumnName("timeout_job_id");

                    b.Property<long>("UserId")
                        .HasColumnType("bigint")
                        .HasColumnName("user_id");

                    b.Property<string>("Username")
                        .HasColumnType("text")
                        .HasColumnName("username");

                    b.Property<int>("WelcomeMessageId")
                        .HasColumnType("integer")
                        .HasColumnName("welcome_message_id");

                    b.HasKey("Id");

                    b.HasIndex("TimeoutJobId")
                        .HasFilter("timeout_job_id IS NOT NULL");

                    b.HasIndex("UserId");

                    b.ToTable("welcome_responses");
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzBlobTrigger", b =>
                {
                    b.HasOne("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzTrigger", "Trigger")
                        .WithMany("BlobTriggers")
                        .HasForeignKey("SchedulerName", "TriggerName", "TriggerGroup")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Trigger");
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzCronTrigger", b =>
                {
                    b.HasOne("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzTrigger", "Trigger")
                        .WithMany("CronTriggers")
                        .HasForeignKey("SchedulerName", "TriggerName", "TriggerGroup")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Trigger");
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzSimplePropertyTrigger", b =>
                {
                    b.HasOne("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzTrigger", "Trigger")
                        .WithMany("SimplePropertyTriggers")
                        .HasForeignKey("SchedulerName", "TriggerName", "TriggerGroup")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Trigger");
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzSimpleTrigger", b =>
                {
                    b.HasOne("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzTrigger", "Trigger")
                        .WithMany("SimpleTriggers")
                        .HasForeignKey("SchedulerName", "TriggerName", "TriggerGroup")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Trigger");
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzTrigger", b =>
                {
                    b.HasOne("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzJobDetail", "JobDetail")
                        .WithMany("Triggers")
                        .HasForeignKey("SchedulerName", "JobName", "JobGroup")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("JobDetail");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.AdminNoteDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", null)
                        .WithMany()
                        .HasForeignKey("ActorTelegramUserId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", null)
                        .WithMany()
                        .HasForeignKey("ActorWebUserId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", "TelegramUser")
                        .WithMany()
                        .HasForeignKey("TelegramUserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("TelegramUser");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.AuditLogRecordDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", null)
                        .WithMany()
                        .HasForeignKey("ActorTelegramUserId")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", null)
                        .WithMany()
                        .HasForeignKey("ActorWebUserId")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", null)
                        .WithMany()
                        .HasForeignKey("TargetTelegramUserId")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", null)
                        .WithMany()
                        .HasForeignKey("TargetWebUserId")
                        .OnDelete(DeleteBehavior.Cascade);
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.ChatAdminRecordDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.ManagedChatRecordDto", "ManagedChat")
                        .WithMany("ChatAdmins")
                        .HasForeignKey("ChatId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", "TelegramUser")
                        .WithMany()
                        .HasForeignKey("TelegramId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("ManagedChat");

                    b.Navigation("TelegramUser");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.DetectionResultRecordDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.MessageRecordDto", "Message")
                        .WithMany("DetectionResults")
                        .HasForeignKey("MessageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", null)
                        .WithMany()
                        .HasForeignKey("TelegramUserId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", null)
                        .WithMany()
                        .HasForeignKey("WebUserId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("Message");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.ImageTrainingSampleDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", null)
                        .WithMany()
                        .HasForeignKey("MarkedByTelegramUserId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", null)
                        .WithMany()
                        .HasForeignKey("MarkedByWebUserId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.MessageRecordDto", "Message")
                        .WithMany()
                        .HasForeignKey("MessageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Message");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.ImpersonationAlertRecordDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", "ReviewedBy")
                        .WithMany()
                        .HasForeignKey("ReviewedByUserId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", "SuspectedUser")
                        .WithMany()
                        .HasForeignKey("SuspectedUserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", "TargetUser")
                        .WithMany()
                        .HasForeignKey("TargetUserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("ReviewedBy");

                    b.Navigation("SuspectedUser");

                    b.Navigation("TargetUser");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.InviteRecordDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", "Creator")
                        .WithMany()
                        .HasForeignKey("CreatedBy")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", "UsedByUser")
                        .WithMany()
                        .HasForeignKey("UsedBy")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", null)
                        .WithMany("CreatedInvites")
                        .HasForeignKey("UserRecordDtoId");

                    b.Navigation("Creator");

                    b.Navigation("UsedByUser");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.LinkedChannelRecordDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.ManagedChatRecordDto", "ManagedChat")
                        .WithOne("LinkedChannel")
                        .HasForeignKey("TelegramGroupsAdmin.Data.Models.LinkedChannelRecordDto", "ManagedChatId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("ManagedChat");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.MessageEditRecordDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.MessageRecordDto", "Message")
                        .WithMany("MessageEdits")
                        .HasForeignKey("MessageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Message");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.MessageTranslationDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.MessageEditRecordDto", "MessageEdit")
                        .WithMany()
                        .HasForeignKey("EditId")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.MessageRecordDto", "Message")
                        .WithMany()
                        .HasForeignKey("MessageId")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.Navigation("Message");

                    b.Navigation("MessageEdit");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.PushSubscriptionDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.RecoveryCodeRecordDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", "User")
                        .WithMany("RecoveryCodes")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.ReportDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", "WebUser")
                        .WithMany("Reports")
                        .HasForeignKey("WebUserId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("WebUser");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.StopWordDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", null)
                        .WithMany()
                        .HasForeignKey("TelegramUserId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", null)
                        .WithMany()
                        .HasForeignKey("WebUserId")
                        .OnDelete(DeleteBehavior.SetNull);
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.TelegramLinkTokenRecordDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", null)
                        .WithMany("LinkTokens")
                        .HasForeignKey("UserRecordDtoId");

                    b.Navigation("User");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.TelegramUserDto", b =>
                {
                    b.OwnsMany("TelegramGroupsAdmin.Data.Models.WarningEntry", "Warnings", b1 =>
                        {
                            b1.Property<long>("TelegramUserDtoTelegramUserId");

                            b1.Property<int>("__synthesizedOrdinal")
                                .ValueGeneratedOnAdd();

                            b1.Property<string>("ActorId")
                                .IsRequired();

                            b1.Property<string>("ActorType")
                                .IsRequired();

                            b1.Property<long>("ChatId");

                            b1.Property<DateTimeOffset?>("ExpiresAt");

                            b1.Property<DateTimeOffset>("IssuedAt");

                            b1.Property<long?>("MessageId");

                            b1.Property<string>("Reason");

                            b1.HasKey("TelegramUserDtoTelegramUserId", "__synthesizedOrdinal");

                            b1.ToTable("telegram_users");

                            b1.ToJson("warnings");

                            b1.WithOwner()
                                .HasForeignKey("TelegramUserDtoTelegramUserId");
                        });

                    b.Navigation("Warnings");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.TelegramUserMappingRecordDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", null)
                        .WithMany("UserMappings")
                        .HasForeignKey("TelegramId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", "User")
                        .WithMany("TelegramMappings")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.ThresholdRecommendationDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", "ReviewedByUser")
                        .WithMany()
                        .HasForeignKey("ReviewedByUserId");

                    b.Navigation("ReviewedByUser");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.TrainingLabelDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", "LabeledByUser")
                        .WithMany()
                        .HasForeignKey("LabeledByUserId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.MessageRecordDto", "Message")
                        .WithMany()
                        .HasForeignKey("MessageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("LabeledByUser");

                    b.Navigation("Message");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.UserActionRecordDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.MessageRecordDto", "Message")
                        .WithMany("UserActions")
                        .HasForeignKey("MessageId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", null)
                        .WithMany()
                        .HasForeignKey("TelegramUserId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", "TargetUser")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", null)
                        .WithMany()
                        .HasForeignKey("WebUserId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("Message");

                    b.Navigation("TargetUser");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.UserRecordDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", null)
                        .WithMany()
                        .HasForeignKey("InvitedBy")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", "InvitedByUser")
                        .WithMany()
                        .HasForeignKey("InvitedByUserId");

                    b.Navigation("InvitedByUser");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.UserTagDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", null)
                        .WithMany()
                        .HasForeignKey("ActorTelegramUserId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", null)
                        .WithMany()
                        .HasForeignKey("ActorWebUserId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", "TelegramUser")
                        .WithMany()
                        .HasForeignKey("TelegramUserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("TelegramUser");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.VerificationTokenDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", "User")
                        .WithMany("VerificationTokens")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.VideoTrainingSampleDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.MessageRecordDto", "Message")
                        .WithMany()
                        .HasForeignKey("MessageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Message");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.WebNotificationDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.UserRecordDto", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.WelcomeResponseDto", b =>
                {
                    b.HasOne("TelegramGroupsAdmin.Data.Models.TelegramUserDto", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzJobDetail", b =>
                {
                    b.Navigation("Triggers");
                });

            modelBuilder.Entity("AppAny.Quartz.EntityFrameworkCore.Migrations.QuartzTrigger", b =>
                {
                    b.Navigation("BlobTriggers");

                    b.Navigation("CronTriggers");

                    b.Navigation("SimplePropertyTriggers");

                    b.Navigation("SimpleTriggers");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.ManagedChatRecordDto", b =>
                {
                    b.Navigation("ChatAdmins");

                    b.Navigation("LinkedChannel");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.MessageRecordDto", b =>
                {
                    b.Navigation("DetectionResults");

                    b.Navigation("MessageEdits");

                    b.Navigation("UserActions");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.TelegramUserDto", b =>
                {
                    b.Navigation("UserMappings");
                });

            modelBuilder.Entity("TelegramGroupsAdmin.Data.Models.UserRecordDto", b =>
                {
                    b.Navigation("CreatedInvites");

                    b.Navigation("LinkTokens");

                    b.Navigation("RecoveryCodes");

                    b.Navigation("Reports");

                    b.Navigation("TelegramMappings");

                    b.Navigation("VerificationTokens");
                });
#pragma warning restore 612, 618
        }
    }
}
